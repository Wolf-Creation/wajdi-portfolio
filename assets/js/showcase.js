
var project_table = [
    //Project1
    {
        projectName: "Identit√©s Mutuelle",
        /* projectDescription: "Lorem ipsum dolor sit amet consectetur adipisicing elit. Vel voluptatem vero, nisi officiis fugit minima praesentium quam illum dolor vitae?",
        tools: "Figma", */
        image: "/assets/img/project/Id_mutuelle_1.png",
        album: {
            image1: "/assets/img/project/Id_mutuelle_1.png",
            image2: "/assets/img/project/Id_mutuelle_2.png",
            image3: "/assets/img/project/Id_mutuelle_3.png"
        }

    },
    //Project2
    {
        projectName: "The Sindbad",
        /* projectDescription: "Lorem ipsum dolor sit amet consectetur adipisicing elit. Vel voluptatem vero, nisi officiis fugit minima praesentium quam illum dolor vitae?",
        tools: "Figma", */
        image: "/assets/img/project/Sindbad.png",
        album: {
            image1: "/assets/img/project/Sindbad_1.png",
            image2: "/assets/img/project/Sindbad_2.png",
            image3: "/assets/img/project/Sindbad_3.png"
        }
    },
    //Project3
    {
        projectName: "Helpdesk",
        /* projectDescription: "Lorem ipsum dolor sit amet consectetur adipisicing elit. Vel voluptatem vero, nisi officiis fugit minima praesentium quam illum dolor vitae?",
        tools: "Figma", */
        image: "/assets/img/project/Helpdesk.png",
        album: {
            image1: "/assets/img/project/Helpdesk_1.png",
            image2: "/assets/img/project/Helpdesk_2.png",
            image3: "/assets/img/project/Helpdesk_3.png"
        }
    },
    //Project4
    {
        projectName: "Capital Humain",
        /* projectDescription: "Lorem ipsum dolor sit amet consectetur adipisicing elit. Vel voluptatem vero, nisi officiis fugit minima praesentium quam illum dolor vitae?",
        tools: "Figma", */
        image: "/assets/img/project/Cap_humain_1.png",
        album: {
            image1: "/assets/img/project/Cap_humain_1.png",
            image2: "/assets/img/project/Cap_humain_2.png",
            image3: "/assets/img/project/Cap_humain_3.png"
        }
    },
    //Project5
    {
        projectName: "ARVEA Nature",
        /* projectDescription: "Lorem ipsum dolor sit amet consectetur adipisicing elit. Vel voluptatem vero, nisi officiis fugit minima praesentium quam illum dolor vitae?",
        tools: "Figma", */
        image: "/assets/img/project/Arvea_1.png",
        album: {
            image1: "/assets/img/project/Arvea_1.png",
            image2: "/assets/img/project/Arvea_2.png",
            image3: "/assets/img/project/Arvea_3.png"
        }
    },
    //Project6
    {
        projectName: "ARTFIN",
        /* projectDescription: "Lorem ipsum dolor sit amet consectetur adipisicing elit. Vel voluptatem vero, nisi officiis fugit minima praesentium quam illum dolor vitae?",
        tools: "Figma", */
        image: "/assets/img/project/Artifin_1.png",
        album: {
            image1: "/assets/img/project/Artifin_1.png",
            image2: "/assets/img/project/Artifin_2.png",
            image3: "/assets/img/project/Artifin_3.png"
        }
    },
    //Project7
    {
        projectName: "Estimator",
        /* projectDescription: "Lorem ipsum dolor sit amet consectetur adipisicing elit. Vel voluptatem vero, nisi officiis fugit minima praesentium quam illum dolor vitae?",
        tools: "Figma", */
        image: "/assets/img/project/Big_estimator.png",
        album: {
            image1: "/assets/img/project/Big_estimator_1.png",
            image2: "/assets/img/project/Big_estimator_2.png",
            image3: "/assets/img/project/Big_estimator_3.png"
        }
    },
    //Project8
    {
        projectName: "Advance Academy",
        /* projectDescription: "Lorem ipsum dolor sit amet consectetur adipisicing elit. Vel voluptatem vero, nisi officiis fugit minima praesentium quam illum dolor vitae?",
        tools: "Figma", */
        image: "/assets/img/project/Ad_Academy_1.png",
        album: {
            image1: "/assets/img/project/Ad_Academy_1.png",
            image2: "/assets/img/project/Ad_Academy_2.png",
            image3: "/assets/img/project/Ad_Academy_3.png"
        }
    },
    //Project9
    {
        projectName: "CarWash",
        /* projectDescription: "Lorem ipsum dolor sit amet consectetur adipisicing elit. Vel voluptatem vero, nisi officiis fugit minima praesentium quam illum dolor vitae?",
        tools: "Figma", */
        image: "/assets/img/project/Car_wash.png",
        album: {
            image1: "/assets/img/project/Car_wash_1.png",
            image2: "/assets/img/project/Car_wash_2.png",
            image3: "/assets/img/project/Car_wash_3.png"
        }
    },
    //Project10
    {
        projectName: "Klinica",
        /* projectDescription: "Lorem ipsum dolor sit amet consectetur adipisicing elit. Vel voluptatem vero, nisi officiis fugit minima praesentium quam illum dolor vitae?",
        tools: "Figma", */
        image: "/assets/img/project/Klinica_1.png",
        album: {
            image1: "/assets/img/project/Klinica_1.png",
            image2: "/assets/img/project/Klinica_2.png",
            image3: "/assets/img/project/Klinica_3.png"
        }
    },
    //Project11
    {
        projectName: "Barber Shop",
        /* projectDescription: "Lorem ipsum dolor sit amet consectetur adipisicing elit. Vel voluptatem vero, nisi officiis fugit minima praesentium quam illum dolor vitae?",
        tools: "Figma", */
        image: "/assets/img/project/barber_shop_1.png",
        album: {
            image1: "/assets/img/project/barber_shop_1.png",
            image2: "/assets/img/project/barber_shop_2.png",
            image3: "/assets/img/project/barber_shop_3.png"
        }
    },
    //Project12
    {
        projectName: "Fouras",
        /* projectDescription: "Lorem ipsum dolor sit amet consectetur adipisicing elit. Vel voluptatem vero, nisi officiis fugit minima praesentium quam illum dolor vitae?",
        tools: "Figma", */
        image: "/assets/img/project/Fouras_1.png",
        album: {
            image1: "/assets/img/project/Fouras_1.png",
            image2: "/assets/img/project/Fouras_2.png",
            image3: "/assets/img/project/Fouras_3.png"
        }
    },
]

const itemsPerPage = 6;
let currentPage = 1;
let totalPages = Math.ceil(project_table.length / itemsPerPage);
var pagination = document.querySelector('.pagination')


// Create pagination in html 
function createPagination() {

    // Create Previous button
    let hRef = document.createElement('a')
    let previous = document.createElement("button")
    hRef.href = '#showcase'
    previous.classList.add('prevBtn')
    pagination.appendChild(hRef)
    hRef.appendChild(previous)
    previous.innerHTML = '&laquo;'

    // Create pagination buttons
    for (let i = 1; i <= totalPages; i++) {
        let hRef = document.createElement('a')
        let button = document.createElement("button");
        hRef.href = '#showcase'
        button.classList.add('page');
        button.innerHTML = i;
        pagination.appendChild(hRef);
        hRef.appendChild(button)


        button.addEventListener("click", function () {
            currentPage = i;
            displayProjects();

            setActive(currentPage)
        });
    }

    // Create Next button
    let hRef2 = document.createElement('a')
    let next = document.createElement("button")
    hRef2.href = '#showcase'
    next.classList.add('nextBtn')
    pagination.appendChild(hRef2)
    hRef2.appendChild(next)
    next.innerHTML = '&raquo;'
}

createPagination()

//Update the pagination buttons 
function updatePaginationButtons() {
    var prevBtn = document.querySelector(".prevBtn");
    var nextBtn = document.querySelector(".nextBtn");

    if (currentPage === 1) {
        prevBtn.style.opacity = "50%";
        nextBtn.style.opacity = "100%";

        nextBtn.addEventListener("click", function () {
            currentPage++;
            if (currentPage <= totalPages) {
                displayProjects();
                
                setActive(currentPage)
            }

            if (currentPage > totalPages) {
                currentPage = totalPages
                displayProjects();

                setActive(currentPage)
            }
        });
    }

    if (currentPage === numPages()) {
        nextBtn.style.opacity = "50%";
        prevBtn.style.opacity = "100%"
        prevBtn.addEventListener("click", function () {
            currentPage--;
            if (currentPage < 1) {
                currentPage = 1
                displayProjects();

                setActive(currentPage)
            }
            else {
                displayProjects();

                setActive(currentPage)
            }
        });
    }

}

function setActive(index) {
    // Remove active class from all buttons
    for (let i = 0; i < pages.length; i++) {
        pages[i].classList.remove("active");
    }

    // Add active class to the selected button
    pages[index - 1].classList.add("active");
}



// Dispaly projects
function displayProjects() {

    let startIndex = (currentPage - 1) * itemsPerPage;
    let endIndex = currentPage * itemsPerPage;
    let paginatedProject = project_table.slice(startIndex, endIndex);

    //clear previous items
    var showcaseGalery = document.querySelector('.showcase-galery');
    showcaseGalery.innerHTML = "";

    //create project items
    paginatedProject.forEach(function (project) {
        var projectHTML = `<div class="project d-flex flex-column gap-4 text-center">
        <div class="project-preview ">
            <img src="${project.image}" width="400" alt="" class="picture">
        </div>
        <div class="project-title">${project.projectName}</div>
        <div class="album">
            <img src="${project.album.image1}" class="col-4 modal1"  alt="">
            <img src="${project.album.image2}" class="col-4 modal2"  alt="">
            <img src="${project.album.image3}" class="col-4 modal3"  alt="">
        </div>`
        showcaseGalery.innerHTML += projectHTML
    });

    // Obtenir tous les √©l√©ments d'aper√ßu de projet
    var projectPreviews = document.querySelectorAll(".project-preview");

    // Boucle √† travers les √©l√©ments d'aper√ßu de projet et ajouter un √©couteur d'√©v√©nements "click" pour chacun
    projectPreviews.forEach(function (preview, index) {
        preview.addEventListener("click", function () {
            // R√©cup√©rer les images de l'album correspondant au projet cliqu√©
            var album = paginatedProject[index].album;
            
            if (window.innerWidth >576) {
                // Mettre √† jour le contenu de la modale en utilisant les images de l'album
                document.querySelector('.modal-close').style.display = 'none'
                document.querySelector(".modal-image").src = paginatedProject[index].image;
                document.querySelector(".img1").src = album.image1;
                document.querySelector(".img2").src = album.image2;
                document.querySelector(".img3").src = album.image3;
    
                // Ajouter un √©couteur d'√©v√©nements "click" pour chaque image de l'album
                var albumImages = document.querySelectorAll(".body-bar img");
                albumImages.forEach(function (image) {
                    image.addEventListener("click", function () {
                        document.querySelector(".modal-image").src = this.src;
                    });
                });
            }else{
                document.querySelector('.modal-image').style.display = 'none'
                document.querySelector(".img1").src = album.image1;
                document.querySelector(".img2").src = album.image2;
                document.querySelector(".img3").src = album.image3;
                document.querySelector("#gallery-popup").classList.add("hide");
            }
            
            const close = document.querySelector('.modal-close')
            // Afficher la modale
            document.querySelector("#gallery-popup").classList.add("show");
            const MyModal = new bootstrap.Modal(document.querySelector('.show'));
            MyModal.show();
            close.addEventListener('click', function() {
                MyModal.hide();
            });

        });
    });

    //Update the pagination buttons
    updatePaginationButtons();
}

displayProjects()

/* album.style.display = 'none' */

//Get number of pages
function numPages() {
    return Math.ceil(project_table.length / itemsPerPage);
}

var pages = document.querySelectorAll('.page')
setActive(1)



